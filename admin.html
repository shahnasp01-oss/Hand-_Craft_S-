<!DOCTYPE html>
<html>
<head>
<title>Admin Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js"></script>

<style>
body{font-family:Arial;max-width:420px;margin:auto;padding:15px}
input,button{width:100%;padding:12px;margin:6px 0}
button{background:black;color:white;border:none}
.card{border:1px solid #ddd;padding:10px;margin:8px 0}
</style>
</head>
<body>

<h3>Admin Login</h3>

<input id="adminPass" type="password" placeholder="Enter Admin Password">
<button id="loginBtn">LOGIN</button>

<div id="panel" style="display:none">
    
<h3>Add Product</h3>
<input id="name" placeholder="Product name">
<input id="price" placeholder="Price">
<input id="img" placeholder="Image file name">
<button id="addBtn">ADD PRODUCT</button>

<h3>Products</h3>
<div id="list"></div>

<button id="logoutBtn">LOGOUT</button>
</div>

<script>
// ---------------- FIREBASE SETUP ----------------
const firebaseConfig = {
  apiKey: "AIzaSyA0Kz28aa80KRK3FoHI1Vu8btiwEWKZwk0",
  authDomain: "handcraftadmin.firebaseapp.com",
  databaseURL: "https://handcraftadmin-default-rtdb.firebaseio.com",
  projectId: "handcraftadmin",
  storageBucket: "handcraftadmin.firebasestorage.app",
  messagingSenderId: "35954316540",
  appId: "1:35954316540:web:7e2334cd5bfbceddd5b379"
};
firebase.initializeApp(firebaseConfig);

const db = firebase.database().ref("products");

// ---------------- ADMIN PASSWORD ----------------
const ADMIN_PASSWORD = "admin123";  // CHANGE THIS

// ---------------- LOGIN ----------------
document.getElementById("loginBtn").onclick = function(){
    let pass = document.getElementById("adminPass").value;

    if(pass === ADMIN_PASSWORD){
        document.querySelector("h3").style.display = "none";
        adminPass.style.display = "none";
        loginBtn.style.display = "none";
        panel.style.display = "block";
    } else {
        alert("Wrong password!");
    }
};

// ---------------- ADD PRODUCT ----------------
document.getElementById("addBtn").onclick = function(){
    db.push({
        name: name.value,
        price: price.value,
        image: img.value
    });

    name.value = "";
    price.value = "";
    img.value = "";
};

// ---------------- LIST PRODUCTS ----------------
db.on("value", snap => {
    list.innerHTML = "";
    snap.forEach(x => {
        const v = x.val();
        list.innerHTML += `
        <div class="card">
            ${v.name} - â‚¹${v.price}
            <button onclick="deleteItem('${x.key}')">DELETE</button>
        </div>`;
    });
});

function deleteItem(id){
    db.child(id).remove();
}

// ---------------- LOGOUT ----------------
document.getElementById("logoutBtn").onclick = function(){
    location.reload();
};
</script>

</body>
</html>
